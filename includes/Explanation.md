The task was to build a WordPress plugin that handles user registration, login, and role-based functionality for "Cool Kids Network." The plugin needed to allow users to sign up, automatically create a character for them, and assign them a default role ("Cool Kid"). In addition, special roles like "Cooler Kid" and "Coolest Kid" needed access to view and manage other users' information. "Coolest Kid" users were also required to have the ability to change other user roles via a form, protected by a secret API key.

When a new user registers, a character is generated via randomuser.me API and stored in a custom database table. The default role assigned is "Cool Kid." A simplified login system where users only need to provide their email. No password validation was required. Users with the "Cooler Kid" role can view other users' names and countries, while "Coolest Kid" users can additionally view email addresses and roles. A form was created for "Coolest Kid" users to change other users' roles by submitting an email, a new role, and a secret API key. This role change triggers an API request to a custom REST endpoint. Added a logout button that triggers an AJAX request to log the user out, showing a success message before redirecting them to the homepage.

I decided to use a custom table (wp_ckn_characters) to store additional user information because WordPress user meta can get cluttered when storing lots of user data. A separate table makes it easier to manage, and query specific character details. Initially, I tried using WordPress's built-in /wp-login.php?action=logout, but encountered issues with 403 errors, likely due to security configurations. After some trial and error, I switched to using a custom AJAX handler for logging out. I opted for a REST API to handle the role changes because it separates the front-end form submission from the server-side logic. I added validation for fields like the email, role, and secret API key before making API requests. This was important to prevent unnecessary requests and to provide immediate feedback to users when fields were missing or incorrect.

#############################################

When I approached this task, I started by breaking down the user stories and focusing on the core functionality first, like registration and role assignment. As I progressed, I discovered a few edge cases, such as the 403 error during logout. This led me to try different approaches until I found that a custom AJAX handler was the most reliable solution. I prefer incremental development: I implement the simplest solution first and then enhance or troubleshoot as needed. This way, I can quickly see if I'm heading in the right direction and adjust accordingly.